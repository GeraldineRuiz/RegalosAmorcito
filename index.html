<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feliz A√±o, mi amor ‚ú®</title>
  <style>
    :root{
      --bg1:#0f1020; --bg2:#1e2150; --accent:#ff7ab6; --gold:#ffd166; --soft:#ffe3f1;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      display:grid;place-items:center;
      background: radial-gradient(1200px 800px at 20% 10%, #1b1e3f 0%, #0b0c1c 60%),
                  radial-gradient(1000px 600px at 80% 90%, #2a2c6a 0%, #0b0c1c 65%);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Inter, Helvetica, Arial, sans-serif;
      color:#fff; overflow:hidden;
    }
    .card{
      width:min(680px, 92vw);
      padding:28px 28px 22px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(10px);
      border-radius:24px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      position:relative; isolation:isolate;
    }
    .title{
      display:flex; align-items:center; gap:12px; justify-content:center;
      font-weight:800; letter-spacing:.4px; text-align:center; margin:6px 0 18px;
      font-size:clamp(20px, 3.2vw, 28px)
    }
    .title .heart{ color:var(--accent); filter:drop-shadow(0 2px 6px rgba(255,122,182,.45)); }

    .btn{
      appearance:none; border:none; cursor:pointer;
      padding:14px 22px; border-radius:999px; font-weight:700; letter-spacing:.3px;
      background:linear-gradient(135deg, var(--accent), #ffb6e6);
      color:#1a1020; box-shadow:0 10px 24px rgba(255,122,182,.35);
      transition: transform .12s ease, filter .2s ease;
    }
    .btn:hover{ transform: translateY(-1px) scale(1.02) }
    .btn:active{ transform: translateY(1px) scale(.98) }

    .hint{ opacity:.8; font-size:14px; margin-top:10px; text-align:center }

    .message{
      text-align:center;
      font-size:clamp(22px, 4.2vw, 36px);
      font-weight:900;
      line-height:1.25;
      display:none;
      margin:8px 0 14px;
      text-shadow: 0 2px 0 rgba(0,0,0,.15), 0 10px 24px rgba(0,0,0,.25);
      max-width:100%;
      padding:0 12px;
      white-space: normal;
      word-break: normal;
      overflow-wrap: normal;
    }
    .message .love{ color:var(--gold) }

    .typewriter{ display:inline-block; border-right: 2px solid var(--soft); white-space:pre-wrap; overflow:visible; animation: caret .8s step-end infinite }
    @keyframes caret{ 50%{ border-color: transparent } }

    .fx-layer{ position:absolute; inset:-10vh -10vw; pointer-events:none; z-index:2 }
    @keyframes rise {
      from{ transform: translateY(10vh) scale(.9) rotate(0deg); opacity:0 }
      10%{opacity:1}
      to{ transform: translateY(-110vh) scale(1.1) rotate(360deg); opacity:0 }
    }
    @keyframes fall {
      from{ transform: translateY(-10vh) rotate(0deg); opacity:0 }
      10%{opacity:1}
      to{ transform: translateY(110vh) rotate(540deg); opacity:0 }
    }

    .particle{ position:absolute; font-size:clamp(18px, 3.2vw, 28px); will-change:transform, opacity; filter: drop-shadow(0 6px 10px rgba(0,0,0,.25)); }
    .spark{ width:8px; height:8px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, #ffeab6, #e0a400 80%, transparent 90%); box-shadow:0 0 18px rgba(255,223,99,.8) }
    .flower{ text-shadow: 0 3px 10px rgba(255,182,193,.45) }

    .glow{ position:absolute; inset:0; filter: blur(28px); border-radius:22px; background: conic-gradient(from 0deg, rgba(255,186,206,.12), rgba(255,255,255,.0), rgba(255,186,206,.12)); opacity:0; transition:opacity .8s ease; z-index:0 }
    .card.show .glow{ opacity:1 }

    .mini{ opacity:.65; font-size:12px; text-align:center; margin-top:8px }

    /* Responsive especial para pantallas peque√±as */
    @media (max-width: 480px) {
      .message {
        font-size: 20px;
        line-height: 1.3;
        padding: 0 8px;
      }
      .btn {
        padding: 12px 18px;
        font-size: 15px;
      }
      .hint { font-size: 12px; }
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="glow"></div>
    <div class="fx-layer" id="fx"></div>

    <div class="title">
      <span class="heart">‚ù§</span>
      Sorpresa para ti
      <span class="heart">‚ù§</span>
    </div>

    <p style="text-align:center; margin:0 0 14px; opacity:.9">Haz click en el bot√≥n para abrir tu mensaje üéÅ</p>

    <div style="display:grid; place-items:center; gap:10px; margin:6px 0 10px;">
      <button class="btn" id="btn">Abrir sorpresa</button>
      <div class="hint">Tambi√©n puedes volver a hacer click para m√°s flores y destellos ‚ú®</div>
    </div>

    <h1 class="message" id="msg">
      <span class="typewriter" id="tw"></span>
    </h1>

    <div class="mini">Hecho con üíó</div>
  </div>

  <script>
    const fxLayer = document.getElementById('fx');
    const btn = document.getElementById('btn');
    const msg = document.getElementById('msg');
    const tw = document.getElementById('tw');
    const card = document.getElementById('card');

    const randInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
    const rand = (min, max) => Math.random() * (max - min) + min;

    function typeWriter(el, texto, vel = 32){
      el.textContent = '';
      let i = 0;
      const timer = setInterval(() => {
        el.innerHTML = texto.slice(0, i++)
          .replace(/\n/g, '<br/>');
        if(i > texto.length){ clearInterval(timer); }
      }, vel);
    }

    function spawnParticles({count=60, mode='mix'} = {}){
      const { innerWidth: W, innerHeight: H } = window;
      for(let i=0; i<count; i++){
        const el = document.createElement('div');
        const isFlower = mode === 'flower' || (mode === 'mix' && Math.random() > 0.5);
        const isRising = Math.random() > 0.5;
        const startX = rand(-0.1*W, 1.1*W);
        const startY = isRising ? rand(0.9*H, 1.1*H) : rand(-0.1*H, 0.2*H);
        const dur = rand(4.5, 8.5);
        const delay = rand(0, .8);
        const rot = rand(-40, 40);
        const size = randInt(18, 30);

        el.className = 'particle';
        el.style.left = startX + 'px';
        el.style.top = startY + 'px';
        el.style.animation = `${isRising ? 'rise' : 'fall'} ${dur}s ${delay}s forwards ease-out`;
        el.style.transform = `rotate(${rot}deg)`;

        if(isFlower){
          el.classList.add('flower');
          el.style.fontSize = size + 'px';
          el.textContent = Math.random() > 0.5 ? 'üå∏' : 'üå∫';
        } else {
          const spark = document.createElement('div');
          spark.className = 'spark';
          spark.style.width = randInt(6,10) + 'px';
          spark.style.height = spark.style.width;
          spark.style.borderRadius = '50%';
          el.appendChild(spark);
        }

        fxLayer.appendChild(el);
        setTimeout(() => el.remove(), (dur + delay) * 1000 + 200);
      }
    }

    function burst({rings=3, perRing=18} = {}){
      const { innerWidth: W, innerHeight: H } = window;
      const cx = W/2, cy = H/2;
      for(let r=1; r<=rings; r++){
        for(let i=0;i<perRing;i++){
          const el = document.createElement('div');
          el.className = 'particle';
          const spark = document.createElement('div');
          spark.className = 'spark';
          el.appendChild(spark);
          const angle = (i/perRing)*Math.PI*2 + Math.random()*.15;
          const dist = r * rand(90, 160);
          const endX = cx + Math.cos(angle)*dist;
          const endY = cy + Math.sin(angle)*dist;
          el.style.left = cx + 'px';
          el.style.top = cy + 'px';
          el.animate([
            { transform:`translate(0,0) scale(1)`, opacity:1 },
            { transform:`translate(${endX-cx}px, ${endY-cy}px) scale(${rand(.9,1.3)})`, opacity:0 }
          ], { duration: rand(900, 1400), easing:'cubic-bezier(.15,.7,.3,1)', fill:'forwards' });
          fxLayer.appendChild(el);
          setTimeout(()=>el.remove(), 1600);
        }
      }
    }

    function launchSurprise(){
      card.classList.add('show');
      msg.style.display = 'block';
      const texto = '¬°Feliz a√±o, mi amor!\nTe amo mucho, eres el mejor novio,\nque sea mucho mucho m√°s tiempo juntos.\n¬°Te adorooo! üíñ';
      typeWriter(tw, texto, 24);
      burst({rings:3, perRing:20});
      spawnParticles({count:64, mode:'mix'});
      setTimeout(()=>spawnParticles({count:70, mode:'flower'}), 1200);
    }

    btn.addEventListener('click', launchSurprise);
    card.addEventListener('click', (e)=>{
      if(e.target !== btn) launchSurprise();
    });
  </script>
</body>
</html>
